"use strict";(()=>{var W=Object.create;var z=Object.defineProperty;var G=Object.getOwnPropertyDescriptor;var H=Object.getOwnPropertyNames;var J=Object.getPrototypeOf,Q=Object.prototype.hasOwnProperty;var T=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(o,n)=>(typeof require<"u"?require:o)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var I=(e,o)=>()=>(o||e((o={exports:{}}).exports,o),o.exports);var X=(e,o,n,t)=>{if(o&&typeof o=="object"||typeof o=="function")for(let r of H(o))!Q.call(e,r)&&r!==n&&z(e,r,{get:()=>o[r],enumerable:!(t=G(o,r))||t.enumerable});return e};var Z=(e,o,n)=>(n=e!=null?W(J(e)):{},X(o||!e||!e.__esModule?z(n,"default",{value:e,enumerable:!0}):n,e));var O=I(()=>{});var P=I((Ee,ee)=>{ee.exports={name:"dotenv",version:"16.3.1",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://github.com/motdotla/dotenv?sponsor=1",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var F=I((Se,x)=>{var R=O(),M=T("path"),te=T("os"),oe=T("crypto"),ae=P(),V=ae.version,ne=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function ie(e){let o={},n=e.toString();n=n.replace(/\r\n?/mg,`
`);let t;for(;(t=ne.exec(n))!=null;){let r=t[1],s=t[2]||"";s=s.trim();let g=s[0];s=s.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),g==='"'&&(s=s.replace(/\\n/g,`
`),s=s.replace(/\\r/g,"\r")),o[r]=s}return o}function ce(e){let o=U(e),n=f.configDotenv({path:o});if(!n.parsed)throw new Error(`MISSING_DATA: Cannot parse ${o} for an unknown reason`);let t=j(e).split(","),r=t.length,s;for(let g=0;g<r;g++)try{let u=t[g].trim(),m=le(n,u);s=f.decrypt(m.ciphertext,m.key);break}catch(u){if(g+1>=r)throw u}return f.parse(s)}function se(e){console.log(`[dotenv@${V}][INFO] ${e}`)}function re(e){console.log(`[dotenv@${V}][WARN] ${e}`)}function C(e){console.log(`[dotenv@${V}][DEBUG] ${e}`)}function j(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function le(e,o){let n;try{n=new URL(o)}catch(u){throw u.code==="ERR_INVALID_URL"?new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development"):u}let t=n.password;if(!t)throw new Error("INVALID_DOTENV_KEY: Missing key part");let r=n.searchParams.get("environment");if(!r)throw new Error("INVALID_DOTENV_KEY: Missing environment part");let s=`DOTENV_VAULT_${r.toUpperCase()}`,g=e.parsed[s];if(!g)throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${s} in your .env.vault file.`);return{ciphertext:g,key:t}}function U(e){let o=M.resolve(process.cwd(),".env");return e&&e.path&&e.path.length>0&&(o=e.path),o.endsWith(".vault")?o:`${o}.vault`}function de(e){return e[0]==="~"?M.join(te.homedir(),e.slice(1)):e}function ue(e){se("Loading env from encrypted .env.vault");let o=f._parseVault(e),n=process.env;return e&&e.processEnv!=null&&(n=e.processEnv),f.populate(n,o,e),{parsed:o}}function ge(e){let o=M.resolve(process.cwd(),".env"),n="utf8",t=!!(e&&e.debug);e&&(e.path!=null&&(o=de(e.path)),e.encoding!=null&&(n=e.encoding));try{let r=f.parse(R.readFileSync(o,{encoding:n})),s=process.env;return e&&e.processEnv!=null&&(s=e.processEnv),f.populate(s,r,e),{parsed:r}}catch(r){return t&&C(`Failed to load ${o} ${r.message}`),{error:r}}}function _e(e){let o=U(e);return j(e).length===0?f.configDotenv(e):R.existsSync(o)?f._configVault(e):(re(`You set DOTENV_KEY but you are missing a .env.vault file at ${o}. Did you forget to build it?`),f.configDotenv(e))}function pe(e,o){let n=Buffer.from(o.slice(-64),"hex"),t=Buffer.from(e,"base64"),r=t.slice(0,12),s=t.slice(-16);t=t.slice(12,-16);try{let g=oe.createDecipheriv("aes-256-gcm",n,r);return g.setAuthTag(s),`${g.update(t)}${g.final()}`}catch(g){let u=g instanceof RangeError,m=g.message==="Invalid key length",y=g.message==="Unsupported state or unable to authenticate data";if(u||m){let E="INVALID_DOTENV_KEY: It must be 64 characters long (or more)";throw new Error(E)}else if(y){let E="DECRYPTION_FAILED: Please check your DOTENV_KEY";throw new Error(E)}else throw console.error("Error: ",g.code),console.error("Error: ",g.message),g}}function me(e,o,n={}){let t=!!(n&&n.debug),r=!!(n&&n.override);if(typeof o!="object")throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");for(let s of Object.keys(o))Object.prototype.hasOwnProperty.call(e,s)?(r===!0&&(e[s]=o[s]),t&&C(r===!0?`"${s}" is already defined and WAS overwritten`:`"${s}" is already defined and was NOT overwritten`)):e[s]=o[s]}var f={configDotenv:ge,_configVault:ue,_parseVault:ce,config:_e,decrypt:pe,parse:ie,populate:me};x.exports.configDotenv=f.configDotenv;x.exports._configVault=f._configVault;x.exports._parseVault=f._parseVault;x.exports.config=f.config;x.exports.decrypt=f.decrypt;x.exports.parse=f.parse;x.exports.populate=f.populate;x.exports=f});var Y=Z(F(),1);Y.config();var fe=process.env.API_KEY_MAPBOX;mapboxgl.accessToken=fe;document.querySelector("[activity-data='image']").removeAttribute("srcset");document.querySelector("[activity-data='liked']").removeAttribute("srcset");function ye(e,o){for(let n of e._guide_of_trips)for(let t of n._guide_recommendations)if(t.id===o)return t;return null}async function K(e,o,n){console.log("destination id",o),console.log("activityId",e),console.log("datastoreeeee",n),console.log("guide.id",n._guide_of_trips[0].id);let t=n._guide_of_trips.find(u=>String(u.id)===o);console.log("Target dest",t);let r=[];t&&t._guide_recommendations&&(r=t._guide_recommendations.filter(u=>u._place.place_id!==e)),console.log("Related Activities",r);let s=[];for(;s.length<5&&r.length>0;){let u=Math.floor(Math.random()*r.length),m=r.splice(u,1)[0];s.push(m)}console.log("Randomactivities",s);let g=document.querySelector("[activity-data='related-activity']");g.innerHTML="",s.forEach(u=>{let m=document.createElement("div");m.className="mini-card_component is-related-activity",m.setAttribute("related-activity-id",u.place_id);let y=u._place,E=document.createElement("div");E.className="margin-bottom margin-xsmall";let k=document.createElement("img");k.src=y.oa_place_image.url,k.className="mini-card_image",E.appendChild(k),m.appendChild(E);let _=document.createElement("div");_.className="mini-card_content";let v=document.createElement("div");v.className="margin-bottom margin-xxsmall";let S=document.createElement("div");S.className="text-weight-bold",S.innerText=y.google_name,v.appendChild(S),_.appendChild(v);let b=document.createElement("div");b.className="margin-bottom margin-xxsmall";let a=document.createElement("div");a.className="mini-card_tag-wrapper",a.innerHTML=`<img src="${y._place_category.category_icon.url}" class="mini-card_tag-icon">
                              <div class="text-size-small text-color-grey">${y._place_category.category_name}</div>`,b.appendChild(a),_.appendChild(b);let c=document.createElement("div");c.className="rating-stars_component";let d=Math.floor(u._place.google_rating);for(let i=1;i<=5;i++){let l=document.createElement("img");l.className="activity-star",l.setAttribute("activity-data",`star-${i}`),i<=d?l.src="https://uploads-ssl.webflow.com/642d2be9a355e8eae598cfe4/643532cbcc2d93ee2563a85e_star-blue.svg":l.src="https://uploads-ssl.webflow.com/642d2be9a355e8eae598cfe4/643532cba4222a070cca9211_star-grey.svg",c.appendChild(l)}_.appendChild(c),m.appendChild(_),m.addEventListener("click",function(){let i=this.getAttribute("related-activity-id"),l=ye(n,i);l?flyToAndSetActive(l.coords):console.warn(`Activity with ID ${i} not found.`)}),g.appendChild(m)})}var $=[];function L(){let o=new URLSearchParams(window.location.search).get("activity_id");Object.values($).forEach(n=>{n.style.border="2px solid grey"}),o&&$[o]&&($[o].style.border="2px solid purple")}async function B(e,o){let t=o._guide_of_trips.find(_=>_._guide_recommendations.some(v=>v.place_id.toString()===e.toString()))?._guide_recommendations.find(_=>_.place_id.toString()===e.toString());if(!t){console.log("Activity data is missing");return}document.querySelector("[activity-data='activity_description']").textContent=t._place._place_category.category_name||"No description available.";let r=t._place._favorite_of_user_of_place.find(_=>_.place_id===t.place_id);r?document.querySelector("[wized='activity_like_button']").setAttribute("activity-data-id",r.id):document.querySelector("[wized='activity_like_button']").removeAttribute("activity-data-id"),document.querySelector("[activity-data='image']").src=t._place.oa_place_image.url,document.querySelector("[activity-data='title']").innerText=t._place.google_name,document.querySelector("[activity-data='category_icon']").src=t._place._place_category.category_icon.url,document.querySelector("[activity-data='address']").innerText=t._place.google_address_string,document.querySelector("[activity-data='phone_number']").innerText=t._place.google_phone_number,document.querySelector("[activity-data='instagram_name']").innerText=t._place.instagram_url,document.querySelector("[activity-data='place_url']").href=t._place.google_place_url,document.querySelector("[activity-data='place_url']").innerText=t._place.place_url,document.querySelector("[activity-data='sub_title']").innerText=t.note,document.querySelector("[activity-data='activity_category']").innerText=t._place.oa_category;function s(_){return _.split("_")[0].split("  ")[0]}let g=t._place._destination_activity.mobi_destination_name,u=s(g);document.querySelector("[activity-data='related-title']").innerText="Other "+u+" activities",document.querySelector("[activity-data='activity_details_title']").innerText=t._place.oa_category+" Details",document.querySelector("[activity-data='activity_description']").innerText=t._place.google_place_description,document.querySelector("[activity-data='instagram_url']").href=t._place.instagram_url,document.querySelector("[activity-data='place_url_link']").href=t._place.place_url,document.querySelector("[activity-data='directions']").href=t._place.google_place_url,document.querySelector("[activity-data='phone_number_link']").href=`tel:${t._place.google_phone_number}`,document.querySelector("[activity-data='google_rating']").textContent=t._place.google_rating,document.querySelector("[activity-data='oh_monday']").textContent=t._place.google_monday_hours?t._place.google_monday_hours:"Not added",document.querySelector("[activity-data='oh_tuesday']").textContent=t._place.google_tuesday_hours?t._place.google_tuesday_hours:"Not added",document.querySelector("[activity-data='oh_wednesday']").textContent=t._place.google_wednesday_hours?t._place.google_wednesday_hours:"Not added",document.querySelector("[activity-data='oh_thursday']").textContent=t._place.google_thursday_hours?t._place.google_thursday_hours:"Not added",document.querySelector("[activity-data='oh_friday']").textContent=t._place.google_friday_hours?t._place.google_friday_hours:"Not added",document.querySelector("[activity-data='oh_saturday']").textContent=t._place.google_saturday_hours?t._place.google_saturday_hours:"Not added",document.querySelector("[activity-data='oh_sunday']").textContent=t._place.google_sunday_hours?t._place.google_sunday_hours:"Not added";let m=t._place._favorite_of_user_of_place.some(_=>_.place_id===t.place_id),y=document.querySelector("[activity-data='liked']");y.src=m?"https://uploads-ssl.webflow.com/642d2be9a355e8eae598cfe4/646356c55116c668dfccf4ae_heart-filled.svg":"https://uploads-ssl.webflow.com/642d2be9a355e8eae598cfe4/643568f2cf264582be96a5ce_heart.svg",document.querySelectorAll("[wized='activity_like_button']").forEach(_=>{_.addEventListener("click",async function(){console.log("activity_like_button clicked");let v=_.getAttribute("activity-data-id");if(console.log("parent_id",v),y){let S=y.getAttribute("src");console.log("Current src: ",S);let b,a;S==="https://uploads-ssl.webflow.com/642d2be9a355e8eae598cfe4/643568f2cf264582be96a5ce_heart.svg"?(y.setAttribute("src","https://uploads-ssl.webflow.com/642d2be9a355e8eae598cfe4/646356c55116c668dfccf4ae_heart-filled.svg"),b="add_favorite",a=t.place_id):(y.setAttribute("src","https://uploads-ssl.webflow.com/642d2be9a355e8eae598cfe4/643568f2cf264582be96a5ce_heart.svg"),b="remove_favorite",a=v,console.log(b,a)),await Wized.data.setVariable(b,a)}else console.log("likedElement is null or undefined")})});let k=Math.floor(t._place.google_rating);for(let _=1;_<=5;_++){let v=document.querySelector(`[activity-data='star-${_}']`);_<=k?(console.log(k),v.setAttribute("src","https://uploads-ssl.webflow.com/642d2be9a355e8eae598cfe4/643532cbcc2d93ee2563a85e_star-blue.svg")):v.setAttribute("src","https://uploads-ssl.webflow.com/642d2be9a355e8eae598cfe4/643532cba4222a070cca9211_star-grey.svg")}document.querySelector("[wized=activity_info_modal]").style.display="block"}window.onload=async()=>{document.querySelector("[wized=activity_info_modal]").style.display="none",console.log("Window loaded"),Wized.request.awaitAllPageLoad(async()=>{Wized.request.await("Load Trip Page");let e=await Wized.data.get("r.18.d"),o=new URLSearchParams(window.location.search),n=o.get("destination_id"),t=o.get("activity_id"),r=document.querySelector('[wized="destination_nav"]');console.log("dataStore:",e),e._guide_of_trips.forEach(a=>{let c=document.createElement("a");c.setAttribute("wized","destination_nav_id"),c.setAttribute("href","#"),c.setAttribute("data-destination-id",a.id),c.classList.add("mab_tabs-wrapper","w-inline-block");let d=document.createElement("p");d.setAttribute("wized","destination_nav_name"),d.setAttribute("data-destination-id",a.id),d.textContent=a.place,d.classList.add("map_tabs-link"),c.appendChild(d),r.appendChild(c),K(t,n,e),c.addEventListener("click",function(){console.log(`Clicked on destination ID: ${a.id}, Place: ${a.place}`),o.delete("activity_id"),history.replaceState({},"",`${location.pathname}?${o}`);let i=_.filter(l=>l.destinationId===a.id);b(i,u)})}),n&&(document.querySelectorAll("[data-destination-id]").forEach(a=>{a.classList.remove("is-active"),a.getAttribute("data-destination-id")===n&&(console.log("tried adding class"),a.classList.add("is-active"))}),document.querySelectorAll("[data-destination-id]").forEach(a=>{a.addEventListener("click",function(c){document.querySelectorAll("[data-destination-id]").forEach(i=>i.classList.remove("is-active")),c.currentTarget.classList.add("is-active");let d=document.querySelector("[wized='activity_info_modal']");d&&(d.style.display="none")})}));let s=document.querySelectorAll('[wized="destination_nav"]');s.forEach(a=>{console.log(s),a.getAttribute("data-destination-id")===n?a.classList.add("is-active"):a.classList.remove("is-active")}),t&&B(t,e);let g=[0,0];if(n){for(let a of e._guide_of_trips)if(a.id.toString()===n){let c=a._destination&&a._destination[0];g=[c.mobi_lng,c.mobi_lat];break}}else{let a=e._guide_of_trips[0],c=a._destination&&a._destination[0];g=[c.mobi_lng,c.mobi_lat]}let u=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:g,zoom:17}),m=null;function y(a){console.log("Fly to place",a);let d=20*16;u.flyTo({center:[a.google_lng,a.google_lat],zoom:15,offset:[d,0]});let i=document.querySelector(`[marker_activity_id="${a.place_id}"]`);i&&(i.style.border="2px solid purple",m=i)}document.querySelectorAll("[data-destination-id]").forEach(a=>{a.addEventListener("click",function(){document.querySelectorAll("[data-destination-id]").forEach(i=>{i.classList.remove("is-active")}),this.classList.add("is-active");let c=this.getAttribute("data-destination-id");console.log(`Destination ID clicked: ${c}`);let d=e._guide_of_trips.find(i=>i.id.toString()===c);if(console.log(e._guide_of_trips),console.log(c),d&&d._destination&&d._destination[0]){let l=d._guide_recommendations.map(w=>[w._place.google_lng,w._place.google_lat]);b(l,u);let p=new URLSearchParams(window.location.search);p.set("destination_id",c),p.delete("activity_id"),history.replaceState({},"",`${location.pathname}?${p}`)}})});function E(a,c){let[d,i]=a,[l,p]=c;return Math.sqrt(Math.pow(l-d,2)+Math.pow(p-i,2))}u.on("moveend",()=>{let a=u.getCenter().toArray();console.log("Map moved, center is: ",a);let c=null,d=1/0;if(e._guide_of_trips.forEach(i=>{let l=i;if(l.id){let p=[l._destination[0].mobi_lng,l._destination[0].mobi_lat];console.log(p);let w=E(a,p);console.log("Calculated distance: ",w),w<d&&(d=w,c={id:l.id,mobi_lat:l._destination[0].mobi_lat,mobi_lng:l._destination[0].mobi_lng},console.log("Updated closest destination: ",c))}}),c){console.log("Closest destination is: ",c),document.querySelectorAll("[data-destination-id]").forEach(l=>{console.log("Removing is-active class from: ",l),l.classList.remove("is-active")});let i=document.querySelector(`[data-destination-id="${c.id}"]`);i?(console.log("Adding is-active class to: ",i),i.classList.add("is-active")):console.log(`No element found for destination_id: ${c}`)}else console.log("No closest destination found")}),u.addControl(new mapboxgl.NavigationControl);function k(a,c,d){let i=a._place;if(console.log("Marker added at:",i.google_lng,i.google_lat),!i)return null;let l=i._place_category.category_icon.url,p=document.createElement("div");p.style.backgroundImage=`url("${l}")`,p.setAttribute("marker_activity_id",a.place_id),p.style.backgroundRepeat="no-repeat",p.style.backgroundPosition="center",p.style.backgroundSize="18px 18px",p.style.width="41px",p.style.height="25px",p.style.borderRadius="12.5px",p.style.backgroundColor="var(--primary-white, #FFF)",p.style.boxShadow="0px 4px 4px 0px rgba(35, 16, 94, 0.10)",p.style.border="2px solid grey";let w=new mapboxgl.Marker(p).setLngLat([i.google_lng,i.google_lat]).addTo(c),h=`
        <div class="mini-card_component .is-popup">
        <img src="${i.oa_place_image.url}" alt="" class="mini-card_image">
        <div class="mini-card_content">
        <div class="margin-bottom margin-xxsmall">
        <div class="text-weight-bold">${i.google_name}</div>
        </div>
        <div class="margin-bottom margin-xsmall">
        <div class="mini-card_tag-wrapper">
        <img src="${i._place_category.category_icon.url}" loading="lazy" alt="" class="mini-card_tag-icon">
        <div class="text-size-small text-color-grey">${i._place_category.category_name||"No description available."}</div>
        </div>
        </div>
        <div class="rating-stars_component">
        <img id="popup-star-1" src="https://uploads-ssl.webflow.com/642d2be9a355e8eae598cfe4/643532cba4222a070cca9211_star-grey.svg" loading="lazy" alt="">
        <img id="popup-star-2" src="https://uploads-ssl.webflow.com/642d2be9a355e8eae598cfe4/643532cba4222a070cca9211_star-grey.svg" loading="lazy" alt="">
        <img id="popup-star-3" src="https://uploads-ssl.webflow.com/642d2be9a355e8eae598cfe4/643532cba4222a070cca9211_star-grey.svg" loading="lazy" alt="">
        <img id="popup-star-4" src="https://uploads-ssl.webflow.com/642d2be9a355e8eae598cfe4/643532cba4222a070cca9211_star-grey.svg" loading="lazy" alt="">
        <img id="popup-star-5" src="https://uploads-ssl.webflow.com/642d2be9a355e8eae598cfe4/643532cba4222a070cca9211_star-grey.svg" loading="lazy" alt="">
        </div>
        </div>
        <img loading="lazy" alt="" class="popup-card_arrow">
        </div>
        `,A=new mapboxgl.Popup({offset:25,closeButton:!1}).setHTML(h);return A.on("open",()=>{let q=Math.floor(i.google_rating);for(let N=1;N<=5;N++){let D=A._content.querySelector(`#popup-star-${N}`);D&&(D.src=N<=q?"https://uploads-ssl.webflow.com/642d2be9a355e8eae598cfe4/643532cbcc2d93ee2563a85e_star-blue.svg":"https://uploads-ssl.webflow.com/642d2be9a355e8eae598cfe4/643532cba4222a070cca9211_star-grey.svg")}}),c.on("click",()=>{document.querySelector("[wized=activity_info_modal]").style.display="none",d=null,S=null,o.delete("activity_id");let q=new URL(window.location.href);q.search=o.toString(),history.replaceState(null,null,q.toString()),L()}),p.addEventListener("mouseenter",()=>{p.style.cursor="pointer",A.setLngLat(w.getLngLat()).addTo(c)}),p.addEventListener("mouseleave",()=>{p.style.cursor="default",A.remove()}),p.addEventListener("click",q=>{q.stopPropagation(),d=a.id,S=a.place_id,o.set("activity_id",a.place_id),history.replaceState({},"",`${location.pathname}?${o}`),console.log(`Marker clicked with activity ID: ${a.place_id}`),B(a.place_id,e),L(),y(i),K(t,n,e)}),document.querySelectorAll("[wized='activity_close_button']").forEach(function(q){q.addEventListener("click",function(N){console.log("Close clicked"),document.querySelector("[wized=activity_info_modal]").style.display="none",o.delete("activity_id");let D=new URL(window.location.href);D.search=o.toString(),history.replaceState(null,null,D.toString()),L()})}),p}let _=[],v=[];var S=null;u.on("load",function(){console.log("Map loaded");let a=new URLSearchParams(window.location.search),c=a.get("destination_id"),d=a.get("activity_id"),i=!1;e._guide_of_trips.forEach(l=>{console.log(`Processing guide ID: ${l.id}`),(l._guide_recommendations||[]).forEach(w=>{let h=w._place;if(!h)return;console.log(`Adding coordinates: [${h.google_lng}, ${h.google_lat}]`),_.push([h.google_lng,h.google_lat]),l.id.toString()===c&&v.push([h.google_lng,h.google_lat]);let A=k(w,u,m);A&&(m=A,$[h.id]=A),console.log("This is place",h),String(h.id)===d&&(i=!0,y(h))})}),L(),window.addEventListener("popstate",L),console.log(`Generated ${_.length} coordinates`),console.log("Coordinates:",_),d&&!i&&console.log(`No activity found for ID: ${d}`),c&&!i?(console.log(`Setting map bounds for destination_id: ${c}`),b(v,u)):i||console.log("No destination_id or activity_id found. Using default map settings.")});function b(a,c){if(!a.length)return;let d=a.reduce((i,l)=>i.extend(l),new mapboxgl.LngLatBounds(a[0],a[0]));c.fitBounds(d,{padding:60})}})};})();
